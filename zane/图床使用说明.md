# 简易图床工具使用说明

## 功能特点

- 支持多种图片格式：PNG, JPG, JPEG, GIF, WebP, BMP
- 自动生成唯一文件名，避免冲突
- 文件大小限制：16MB
- 提供Web界面和API接口
- 图片格式验证，确保上传的是有效图片

## 安装依赖

```bash
pip install -r requirements.txt
```

## 启动服务

```bash
python image_host.py
```

服务启动后会在 `http://localhost:5000` 提供服务。

## 使用方式

### 1. Web界面上传

访问 `http://localhost:5000`，使用网页界面上传图片。

### 2. API接口上传

**接口地址**: `POST http://localhost:5000/api/upload`

**请求方式**: multipart/form-data

**参数**: 
- `file`: 图片文件

**返回格式**:
```json
{
    "success": true,
    "filename": "abc123_1234567890.jpg",
    "url": "http://localhost:5000/uploads/abc123_1234567890.jpg",
    "message": "上传成功"
}
```

### 3. 使用curl上传

```bash
curl -X POST -F "file=@your_image.jpg" http://localhost:5000/api/upload
```

### 4. 使用Python上传

```python
import requests

with open('your_image.jpg', 'rb') as f:
    files = {'file': f}
    response = requests.post('http://localhost:5000/api/upload', files=files)
    result = response.json()
    
    if result['success']:
        print(f"图片URL: {result['url']}")
    else:
        print(f"上传失败: {result['error']}")
```

## 测试工具

运行测试脚本验证功能：

```bash
python test_image_host.py
```

## 健康检查

访问 `http://localhost:5000/health` 检查服务状态。

## 文件存储

上传的图片存储在 `uploads/` 目录下，文件名格式为：`{uuid}_{timestamp}.{ext}`

## 注意事项

1. 确保 `uploads/` 目录有写入权限
2. 生产环境建议配置反向代理（如Nginx）
3. 可以根据需要调整文件大小限制和允许的文件类型
4. 建议定期清理过期文件以节省存储空间