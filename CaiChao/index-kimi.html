<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<title>滚动胶片 + 自动上蹦</title>
<style>
    html,body{margin:0;height:100%;background:#f5f3f0;display:flex;flex-direction:column;align-items:center;font-family:PingFang SC,Helvetica,sans-serif;overflow:hidden;}

    /* 主展示区 */
    #mainStage{width:400px;height:250px;margin:40px 0;border-radius:6px;overflow:hidden;box-shadow:0 8px 20px rgba(0,0,0,.15);background:#ddd;position:relative;}
    #mainStage img{width:100%;height:100%;object-fit:cover;display:block;}

    /* 胶片视窗（只显示一条）*/
    #filmViewport{width:100%;height:90px;position:relative;overflow:hidden;background:#222;}
    #filmStrip{display:flex;position:absolute;top:0;left:0;height:100%;will-change:transform;}
    .frame{flex:0 0 120px;height:80px;border:3px solid #555;border-radius:4px;margin-right:10px;background:#000;overflow:hidden;}
    .frame img{width:100%;height:100%;object-fit:cover;display:block;}

    /* 跳跃元素 */
    .jumper{position:fixed;z-index:9999;pointer-events:none;border-radius:4px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,.3);}
</style>
</head>
<body>

<div id="mainStage">
    <img id="mainImg" src="https://picsum.photos/400/250?random=0" />
</div>

<div id="filmViewport">
    <div id="filmStrip"></div>
</div>

<script>
/* ---------- 1. 准备 10 张占位图 ---------- */
const count = 10;
const strip  = document.getElementById('filmStrip');
for (let i = 0; i < count; i++) {
    const frame = document.createElement('div');
    frame.className = 'frame';
    frame.innerHTML = `<img src="https://picsum.photos/120/80?random=${i+1}">`;
    strip.appendChild(frame);
}

/* ---------- 2. 无限滚动动画 ---------- */
const frameWidth = 126;             // 120 + 3*2 边框
const totalWidth = count * frameWidth;
let offset = 0;
function loopScroll() {
    offset -= 0.5;                  // 速度自行调节
    if (offset < -totalWidth) offset = 0;
    strip.style.transform = `translateX(${offset}px)`;
    requestAnimationFrame(loopScroll);
}
loopScroll();

/* ---------- 3. 定时“蹦”最左帧 ---------- */
const mainStage = document.getElementById('mainStage');
const mainImg   = document.getElementById('mainImg');

function pickAndJump() {
    /* 计算当前最左可见帧索引 */
    const idx = Math.floor((-offset % totalWidth) / frameWidth);
    const frame = strip.children[idx];

    /* 复制帧做跳跃元素 */
    const jumper = document.createElement('div');
    jumper.className = 'jumper';
    jumper.innerHTML = `<img src="${frame.querySelector('img').src}">`;
    document.body.appendChild(jumper);

    /* 起始位置 */
    const from = frame.getBoundingClientRect();
    const to   = mainStage.getBoundingClientRect();
    jumper.style.left = from.left + 'px';
    jumper.style.top  = from.top  + 'px';
    jumper.style.width  = from.width  + 'px';
    jumper.style.height = from.height + 'px';

    /* 动画 */
    jumper.animate([
        { transform:'scale(1)',    opacity:1 },
        { transform:'scale(1.2)',  opacity:1, offset:0.4 },
        { transform:`translate(${to.left-from.left}px,${to.top-from.top}px) scale(${to.width/from.width},${to.height/from.height})`, opacity:1 }
    ],{
        duration:700,
        easing:'cubic-bezier(.25,.8,.5,1.4)'
    }).onfinish = () => {
        mainImg.src = frame.querySelector('img').src;
        jumper.remove();
    };
}

/* 每隔 3 秒触发一次 */
setInterval(pickAndJump, 3000);
</script>
</body>
</html>